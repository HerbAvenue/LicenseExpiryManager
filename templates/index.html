{% extends 'base.html' %}

{% block head %}
<title>License Manager Login</title>
{% endblock %}

{% block body %}
<div class="container">
    <h1>Login</h1>
    <br />
    <form id="auth-form" action="{{url_for('login')}}" method="post"> <!--WHY IS URL_FOR IN JINJA2????-->
        <input 
            type="text" 
            name="username" 
            placeholder="Username" 
            class="input-field"
            required 
        />
        <input
            type="password"
            name="password"
            placeholder="Password"
            class="input-field"
            required
        />
        <input type="submit" value="Login" class="btn btn-login" onclick="setActionForm('login')"/>
        <input type="button" value="Register" class="btn btn-register" onclick="setActionForm('register')"/>
    </form>
</div>

<script>    
    function setActionForm(action) {
        let form = document.getElementById("auth-form");
        let username = document.querySelector('input[name="username"]').value.trim();
        let password = document.querySelector('input[name="password"]').value.trim();
    
        // Check for empty inputs
        if (!username || !password) {
            alert("Username and password cannot be empty.");
            return; // Prevent further execution if inputs are invalid
        }
    
        if (action === 'login') {
            form.action = "{{ url_for('login') }}";
            form.method = "post";
            form.submit();
        } else if (action === 'register') {
            form.action = "{{ url_for('register') }}";
            form.method = "post";
            form.submit();
        }
    }
</script>

{% endblock %}
